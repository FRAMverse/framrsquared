% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sensitivity.R
\name{sensitivity_custom}
\alias{sensitivity_custom}
\title{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}
Generate sensitivity analyses runs based on a list of match/replace dataframes}
\usage{
sensitivity_custom(
  fram_db,
  template_run,
  table_name,
  scenario_list,
  tamm_template = NULL,
  tamm_target_folder = NULL,
  label = "sensitivity",
  save_log = TRUE
)
}
\arguments{
\item{fram_db}{Fram database}

\item{template_run}{Run ID of the run that should be used as a template for the sensitivity analyses.}

\item{table_name}{Name of FRAM table that will be modified for the sensitivity analyses. For list items that are named, be ignored in favor of item name.}

\item{scenario_list}{List of match/replace dataframes as described in documentation of \code{modify_table()}. If present, list item names are assumed to identify the table to be changed.}

\item{tamm_template}{Optional; character string of filepath of a TAMM to be used as a template. If provided (and tamm_target_folder provided), \code{sensitivity_scaled} will make a tamm for each sensitivity analysis run, using names that work with the FRAM multirun fork "Use folder" option.}

\item{tamm_target_folder}{Folder to copy TAMMs into. Will create if it does not exist.}

\item{label}{Label added to each of the generated run names to identify this sequence of sensitivity analyses. String, defaults to "sensitivity"}

\item{save_log}{Should a log .csv of the specifics used (row ids, match criterion, scaling or replacement values) be saved in the same folder as the FRAM database? Logical, defaults to TRUE.}
}
\value{
Invisibly returns object \code{scenario_list}, but with list items named with the corresponding RunID.
}
\description{
For complex sensitivity analyses, it may be easiest to programmatically create a series of
match/replace dataframes (\code{?modify_table}), one for each sensitivity run. \code{sensitivity_custom()} uses a list of
these dataframes to create a series of sensitivity analyses runs. Otherwise behaves as \code{sensitivity_exact()} or \code{sensitivity_scaled()}. Saved log is a .rds file that contains \code{scenario_list} but with each list item named with the matching RunID.
}
\details{
Current framework does not support automating creation of sensitivity analyses in which changes are being made to multiple tables for a single run.
}
\examples{
\dontrun{
## silly quick-and-dirty example: try these
## two scenarios: mark release rates of 0.05 and 0.01 for fisheries 1 and 2
## for timestep 1, or flipping those. Modifications to FisheryScalers table
fram_db <- connect_fram_db(here("Valid2024_sens_test.mdb"))

custom_scenarios = list(data.frame(match_FisheryID = c(1, 2),
                                  match_TimeStep = c(1, 1),
                                  replace_MarkReleaseRate = c(.05, .01)),
                       data.frame(match_FisheryID = c(1, 2),
                                  match_TimeStep = c(1, 1),
                                  replace_MarkReleaseRate = c(.01, .05))
)

tamm_template = here("Coho2513NOF-165.xlsx")
tamm_target_folder = here("sens_test_custom/")
fram_db |>
 sensitivity_custom(template_run = 28,
                    table_name = 'FisheryScalers',
                    scenario_list = custom_scenarios,
                    tamm_template = tamm_template,
                    tamm_target_folder = tamm_target_folder,
                    label = "markrelease custom")
disconnect_fram_db(fram_db)
}
}
\seealso{
\code{\link[=sensitivity_scaled]{sensitivity_scaled()}}, \code{\link[=sensitivity_exact]{sensitivity_exact()}}
}
